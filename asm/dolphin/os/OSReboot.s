.include "macros.inc"

.section .text, "ax"  # 0x800065A0 - 0x80063CE0 ; 0x0005D740

.fn Run, local
/* 8002BA00 00027980  7C 08 02 A6 */	mflr r0
/* 8002BA04 00027984  90 01 00 04 */	stw r0, 0x4(r1)
/* 8002BA08 00027988  94 21 FF E8 */	stwu r1, -0x18(r1)
/* 8002BA0C 0002798C  93 E1 00 14 */	stw r31, 0x14(r1)
/* 8002BA10 00027990  7C 7F 1B 78 */	mr r31, r3
/* 8002BA14 00027994  4B FF F5 D1 */	bl OSDisableInterrupts
/* 8002BA18 00027998  4B FF D6 2D */	bl ICFlashInvalidate
/* 8002BA1C 0002799C  7C 00 04 AC */	sync
/* 8002BA20 000279A0  4C 00 01 2C */	isync
/* 8002BA24 000279A4  7F E8 03 A6 */	mtlr r31
/* 8002BA28 000279A8  4E 80 00 20 */	blr
/* 8002BA2C 000279AC  80 01 00 1C */	lwz r0, 0x1c(r1)
/* 8002BA30 000279B0  83 E1 00 14 */	lwz r31, 0x14(r1)
/* 8002BA34 000279B4  38 21 00 18 */	addi r1, r1, 0x18
/* 8002BA38 000279B8  7C 08 03 A6 */	mtlr r0
/* 8002BA3C 000279BC  4E 80 00 20 */	blr
.endfn Run

.fn Callback, local
/* 8002BA40 000279C0  38 00 00 01 */	li r0, 0x1
/* 8002BA44 000279C4  90 0D 84 90 */	stw r0, Prepared@sda21(r13)
/* 8002BA48 000279C8  4E 80 00 20 */	blr
.endfn Callback

.fn __OSReboot, global
/* 8002BA4C 000279CC  7C 08 02 A6 */	mflr r0
/* 8002BA50 000279D0  90 01 00 04 */	stw r0, 0x4(r1)
/* 8002BA54 000279D4  94 21 FC B8 */	stwu r1, -0x348(r1)
/* 8002BA58 000279D8  93 E1 03 44 */	stw r31, 0x344(r1)
/* 8002BA5C 000279DC  93 C1 03 40 */	stw r30, 0x340(r1)
/* 8002BA60 000279E0  93 A1 03 3C */	stw r29, 0x33c(r1)
/* 8002BA64 000279E4  7C 7D 1B 78 */	mr r29, r3
/* 8002BA68 000279E8  3C 60 80 08 */	lis r3, Header@ha
/* 8002BA6C 000279EC  3B C3 00 C0 */	addi r30, r3, Header@l
/* 8002BA70 000279F0  4B FF F5 75 */	bl OSDisableInterrupts
/* 8002BA74 000279F4  80 AD 84 88 */	lwz r5, SaveStart@sda21(r13)
/* 8002BA78 000279F8  3F E0 81 80 */	lis r31, 0x817FFFFC@ha
/* 8002BA7C 000279FC  38 60 00 00 */	li r3, 0x0
/* 8002BA80 00027A00  80 0D 84 8C */	lwz r0, SaveEnd@sda21(r13)
/* 8002BA84 00027A04  3C 80 81 30 */	lis r4, 0x812FDFF0@ha
/* 8002BA88 00027A08  38 E0 00 01 */	li r7, 0x1
/* 8002BA8C 00027A0C  93 BF FF FC */	stw r29, 0x817FFFFC@l(r31)
/* 8002BA90 00027A10  3C C0 80 00 */	lis r6, 0x800030E2@ha
/* 8002BA94 00027A14  90 7F FF F8 */	stw r3, -0x8(r31)
/* 8002BA98 00027A18  38 61 00 70 */	addi r3, r1, 0x70
/* 8002BA9C 00027A1C  98 E6 30 E2 */	stb r7, 0x800030E2@l(r6)
/* 8002BAA0 00027A20  90 A4 DF F0 */	stw r5, 0x812FDFF0@l(r4)
/* 8002BAA4 00027A24  90 04 DF EC */	stw r0, -0x2014(r4)
/* 8002BAA8 00027A28  4B FF DC E9 */	bl OSClearContext
/* 8002BAAC 00027A2C  38 61 00 70 */	addi r3, r1, 0x70
/* 8002BAB0 00027A30  4B FF DB 19 */	bl OSSetCurrentContext
/* 8002BAB4 00027A34  48 00 5D 91 */	bl DVDInit
/* 8002BAB8 00027A38  38 60 00 01 */	li r3, 0x1
/* 8002BABC 00027A3C  48 00 7B 99 */	bl DVDSetAutoInvalidation
/* 8002BAC0 00027A40  3C 60 80 03 */	lis r3, Callback@ha
/* 8002BAC4 00027A44  38 63 BA 40 */	addi r3, r3, Callback@l
/* 8002BAC8 00027A48  48 00 7F C9 */	bl __DVDPrepareResetAsync
/* 8002BACC 00027A4C  48 00 7E E1 */	bl DVDCheckDisk
/* 8002BAD0 00027A50  2C 03 00 00 */	cmpwi r3, 0x0
/* 8002BAD4 00027A54  40 82 00 0C */	bne .L_8002BAE0
/* 8002BAD8 00027A58  80 7F FF FC */	lwz r3, -0x4(r31)
/* 8002BADC 00027A5C  48 00 02 31 */	bl __OSDoHotReset
.L_8002BAE0:
/* 8002BAE0 00027A60  38 60 FF E0 */	li r3, -0x20
/* 8002BAE4 00027A64  4B FF F8 C9 */	bl __OSMaskInterrupts
/* 8002BAE8 00027A68  38 60 04 00 */	li r3, 0x400
/* 8002BAEC 00027A6C  4B FF F9 49 */	bl __OSUnmaskInterrupts
/* 8002BAF0 00027A70  4B FF F5 09 */	bl OSEnableInterrupts
/* 8002BAF4 00027A74  48 00 00 04 */	b .L_8002BAF8
.L_8002BAF8:
/* 8002BAF8 00027A78  48 00 00 04 */	b .L_8002BAFC
.L_8002BAFC:
/* 8002BAFC 00027A7C  80 0D 84 90 */	lwz r0, Prepared@sda21(r13)
/* 8002BB00 00027A80  2C 00 00 00 */	cmpwi r0, 0x0
/* 8002BB04 00027A84  41 82 FF F8 */	beq .L_8002BAFC
/* 8002BB08 00027A88  7F C4 F3 78 */	mr r4, r30
/* 8002BB0C 00027A8C  38 61 00 40 */	addi r3, r1, 0x40
/* 8002BB10 00027A90  38 A0 00 20 */	li r5, 0x20
/* 8002BB14 00027A94  38 C0 24 40 */	li r6, 0x2440
/* 8002BB18 00027A98  38 E0 00 00 */	li r7, 0x0
/* 8002BB1C 00027A9C  48 00 78 A5 */	bl DVDReadAbsAsyncForBS
/* 8002BB20 00027AA0  3F E0 81 80 */	lis r31, 0x817FFFFC@ha
/* 8002BB24 00027AA4  48 00 00 04 */	b .L_8002BB28
.L_8002BB28:
/* 8002BB28 00027AA8  48 00 00 04 */	b .L_8002BB2C
.L_8002BB2C:
/* 8002BB2C 00027AAC  80 01 00 4C */	lwz r0, 0x4c(r1)
/* 8002BB30 00027AB0  2C 00 00 01 */	cmpwi r0, 0x1
/* 8002BB34 00027AB4  41 82 FF F8 */	beq .L_8002BB2C
/* 8002BB38 00027AB8  40 80 00 14 */	bge .L_8002BB4C
/* 8002BB3C 00027ABC  2C 00 FF FF */	cmpwi r0, -0x1
/* 8002BB40 00027AC0  41 82 00 18 */	beq .L_8002BB58
/* 8002BB44 00027AC4  40 80 00 20 */	bge .L_8002BB64
/* 8002BB48 00027AC8  4B FF FF E4 */	b .L_8002BB2C
.L_8002BB4C:
/* 8002BB4C 00027ACC  2C 00 00 0C */	cmpwi r0, 0xc
/* 8002BB50 00027AD0  40 80 FF DC */	bge .L_8002BB2C
/* 8002BB54 00027AD4  48 00 00 04 */	b .L_8002BB58
.L_8002BB58:
/* 8002BB58 00027AD8  80 7F FF FC */	lwz r3, 0x817FFFFC@l(r31)
/* 8002BB5C 00027ADC  48 00 01 B1 */	bl __OSDoHotReset
/* 8002BB60 00027AE0  4B FF FF CC */	b .L_8002BB2C
.L_8002BB64:
/* 8002BB64 00027AE4  80 7E 00 18 */	lwz r3, 0x18(r30)
/* 8002BB68 00027AE8  80 9E 00 14 */	lwz r4, 0x14(r30)
/* 8002BB6C 00027AEC  38 03 00 1F */	addi r0, r3, 0x1f
/* 8002BB70 00027AF0  38 84 00 20 */	addi r4, r4, 0x20
/* 8002BB74 00027AF4  54 1E 00 34 */	clrrwi r30, r0, 5
/* 8002BB78 00027AF8  48 00 00 04 */	b .L_8002BB7C
.L_8002BB7C:
/* 8002BB7C 00027AFC  48 00 00 04 */	b .L_8002BB80
.L_8002BB80:
/* 8002BB80 00027B00  80 0D 84 90 */	lwz r0, Prepared@sda21(r13)
/* 8002BB84 00027B04  2C 00 00 00 */	cmpwi r0, 0x0
/* 8002BB88 00027B08  41 82 FF F8 */	beq .L_8002BB80
/* 8002BB8C 00027B0C  7F C5 F3 78 */	mr r5, r30
/* 8002BB90 00027B10  38 61 00 10 */	addi r3, r1, 0x10
/* 8002BB94 00027B14  38 C4 24 40 */	addi r6, r4, 0x2440
/* 8002BB98 00027B18  3C 80 81 30 */	lis r4, 0x8130
/* 8002BB9C 00027B1C  38 E0 00 00 */	li r7, 0x0
/* 8002BBA0 00027B20  48 00 78 21 */	bl DVDReadAbsAsyncForBS
/* 8002BBA4 00027B24  3F E0 81 80 */	lis r31, 0x817FFFFC@ha
/* 8002BBA8 00027B28  48 00 00 04 */	b .L_8002BBAC
.L_8002BBAC:
/* 8002BBAC 00027B2C  48 00 00 04 */	b .L_8002BBB0
.L_8002BBB0:
/* 8002BBB0 00027B30  80 01 00 1C */	lwz r0, 0x1c(r1)
/* 8002BBB4 00027B34  2C 00 00 01 */	cmpwi r0, 0x1
/* 8002BBB8 00027B38  41 82 FF F8 */	beq .L_8002BBB0
/* 8002BBBC 00027B3C  40 80 00 14 */	bge .L_8002BBD0
/* 8002BBC0 00027B40  2C 00 FF FF */	cmpwi r0, -0x1
/* 8002BBC4 00027B44  41 82 00 18 */	beq .L_8002BBDC
/* 8002BBC8 00027B48  40 80 00 20 */	bge .L_8002BBE8
/* 8002BBCC 00027B4C  4B FF FF E4 */	b .L_8002BBB0
.L_8002BBD0:
/* 8002BBD0 00027B50  2C 00 00 0C */	cmpwi r0, 0xc
/* 8002BBD4 00027B54  40 80 FF DC */	bge .L_8002BBB0
/* 8002BBD8 00027B58  48 00 00 04 */	b .L_8002BBDC
.L_8002BBDC:
/* 8002BBDC 00027B5C  80 7F FF FC */	lwz r3, 0x817FFFFC@l(r31)
/* 8002BBE0 00027B60  48 00 01 2D */	bl __OSDoHotReset
/* 8002BBE4 00027B64  4B FF FF CC */	b .L_8002BBB0
.L_8002BBE8:
/* 8002BBE8 00027B68  3C 60 81 30 */	lis r3, 0x8130
/* 8002BBEC 00027B6C  7F C4 F3 78 */	mr r4, r30
/* 8002BBF0 00027B70  4B FF D4 1D */	bl ICInvalidateRange
/* 8002BBF4 00027B74  3C 60 81 30 */	lis r3, 0x81300004@ha
/* 8002BBF8 00027B78  4B FF FE 09 */	bl Run
/* 8002BBFC 00027B7C  80 01 03 4C */	lwz r0, 0x34c(r1)
/* 8002BC00 00027B80  83 E1 03 44 */	lwz r31, 0x344(r1)
/* 8002BC04 00027B84  83 C1 03 40 */	lwz r30, 0x340(r1)
/* 8002BC08 00027B88  7C 08 03 A6 */	mtlr r0
/* 8002BC0C 00027B8C  83 A1 03 3C */	lwz r29, 0x33c(r1)
/* 8002BC10 00027B90  38 21 03 48 */	addi r1, r1, 0x348
/* 8002BC14 00027B94  4E 80 00 20 */	blr
.endfn __OSReboot

.section .bss, "", @nobits  # 0x8006D1C0 - 0x800A8A80

.balign 8

.obj Header, local
	.skip 0x20
.endobj Header

.section .sbss, "", @nobits  # 0x800A8DC0 - 0x800A9380

.balign 8

.obj SaveStart, local
	.skip 0x4
.endobj SaveStart

.obj SaveEnd, local
	.skip 0x4
.endobj SaveEnd

.obj Prepared, local
	.skip 0x4
.endobj Prepared

.skip 4
