.include "macros.inc"

.section .text, "ax"  # 0x800065A0 - 0x80063CE0 ; 0x0005D740

.global OSGetTime
OSGetTime:
/* 8002F51C 0002B49C  7C 6D 42 E6 */	mftb r3, 269
/* 8002F520 0002B4A0  7C 8C 42 E6 */	mftb r4, 268
/* 8002F524 0002B4A4  7C AD 42 E6 */	mftb r5, 269
/* 8002F528 0002B4A8  7C 03 28 00 */	cmpw r3, r5
/* 8002F52C 0002B4AC  40 82 FF F0 */	bne OSGetTime
/* 8002F530 0002B4B0  4E 80 00 20 */	blr

.global OSGetTick
OSGetTick:
/* 8002F534 0002B4B4  7C 6C 42 E6 */	mftb r3, 268
/* 8002F538 0002B4B8  4E 80 00 20 */	blr

.global __OSGetSystemTime
__OSGetSystemTime:
/* 8002F53C 0002B4BC  7C 08 02 A6 */	mflr r0
/* 8002F540 0002B4C0  90 01 00 04 */	stw r0, 0x4(r1)
/* 8002F544 0002B4C4  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8002F548 0002B4C8  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 8002F54C 0002B4CC  93 C1 00 18 */	stw r30, 0x18(r1)
/* 8002F550 0002B4D0  93 A1 00 14 */	stw r29, 0x14(r1)
/* 8002F554 0002B4D4  4B FF BA 91 */	bl OSDisableInterrupts
/* 8002F558 0002B4D8  7C 7F 1B 78 */	mr r31, r3
/* 8002F55C 0002B4DC  4B FF FF C1 */	bl OSGetTime
/* 8002F560 0002B4E0  3C C0 80 00 */	lis r6, 0x800030DC@ha
/* 8002F564 0002B4E4  80 A6 30 DC */	lwz r5, 0x800030DC@l(r6)
/* 8002F568 0002B4E8  80 06 30 D8 */	lwz r0, 0x30d8(r6)
/* 8002F56C 0002B4EC  7F A5 20 14 */	addc r29, r5, r4
/* 8002F570 0002B4F0  7F C0 19 14 */	adde r30, r0, r3
/* 8002F574 0002B4F4  7F E3 FB 78 */	mr r3, r31
/* 8002F578 0002B4F8  4B FF BA 95 */	bl OSRestoreInterrupts
/* 8002F57C 0002B4FC  7F A4 EB 78 */	mr r4, r29
/* 8002F580 0002B500  7F C3 F3 78 */	mr r3, r30
/* 8002F584 0002B504  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8002F588 0002B508  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 8002F58C 0002B50C  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 8002F590 0002B510  7C 08 03 A6 */	mtlr r0
/* 8002F594 0002B514  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 8002F598 0002B518  38 21 00 20 */	addi r1, r1, 0x20
/* 8002F59C 0002B51C  4E 80 00 20 */	blr
