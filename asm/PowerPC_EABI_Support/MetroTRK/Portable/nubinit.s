.include "macros.inc"

.section .text, "ax"  # 0x800065A0 - 0x80063CE0 ; 0x0005D740

.fn TRKInitializeNub, global
/* 8005AB2C 00056AAC  7C 08 02 A6 */	mflr r0
/* 8005AB30 00056AB0  90 01 00 04 */	stw r0, 0x4(r1)
/* 8005AB34 00056AB4  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8005AB38 00056AB8  93 E1 00 0C */	stw r31, 0xc(r1)
/* 8005AB3C 00056ABC  93 C1 00 08 */	stw r30, 0x8(r1)
/* 8005AB40 00056AC0  48 00 01 0D */	bl TRKInitializeEndian
/* 8005AB44 00056AC4  7C 7E 1B 79 */	mr. r30, r3
/* 8005AB48 00056AC8  40 82 00 08 */	bne .L_8005AB50
/* 8005AB4C 00056ACC  48 00 0B AD */	bl usr_put_initialize
.L_8005AB50:
/* 8005AB50 00056AD0  2C 1E 00 00 */	cmpwi r30, 0x0
/* 8005AB54 00056AD4  40 82 00 0C */	bne .L_8005AB60
/* 8005AB58 00056AD8  4B FF FD 79 */	bl TRKInitializeEventQueue
/* 8005AB5C 00056ADC  7C 7E 1B 78 */	mr r30, r3
.L_8005AB60:
/* 8005AB60 00056AE0  2C 1E 00 00 */	cmpwi r30, 0x0
/* 8005AB64 00056AE4  40 82 00 0C */	bne .L_8005AB70
/* 8005AB68 00056AE8  48 00 01 89 */	bl TRKInitializeMessageBuffers
/* 8005AB6C 00056AEC  7C 7E 1B 78 */	mr r30, r3
.L_8005AB70:
/* 8005AB70 00056AF0  2C 1E 00 00 */	cmpwi r30, 0x0
/* 8005AB74 00056AF4  40 82 00 0C */	bne .L_8005AB80
/* 8005AB78 00056AF8  48 00 0B 85 */	bl TRKInitializeDispatcher
/* 8005AB7C 00056AFC  7C 7E 1B 78 */	mr r30, r3
.L_8005AB80:
/* 8005AB80 00056B00  2C 1E 00 00 */	cmpwi r30, 0x0
/* 8005AB84 00056B04  40 82 00 40 */	bne .L_8005ABC4
/* 8005AB88 00056B08  3C 60 80 0B */	lis r3, gTRKInputPendingPtr@ha
/* 8005AB8C 00056B0C  3B E3 82 D4 */	addi r31, r3, gTRKInputPendingPtr@l
/* 8005AB90 00056B10  3C 60 00 01 */	lis r3, 0x1
/* 8005AB94 00056B14  38 DF 00 00 */	addi r6, r31, 0x0
/* 8005AB98 00056B18  38 63 E1 00 */	addi r3, r3, -0x1f00
/* 8005AB9C 00056B1C  38 80 00 01 */	li r4, 0x1
/* 8005ABA0 00056B20  38 A0 00 00 */	li r5, 0x0
/* 8005ABA4 00056B24  48 00 42 85 */	bl TRKInitializeIntDrivenUART
/* 8005ABA8 00056B28  7C 60 1B 78 */	mr r0, r3
/* 8005ABAC 00056B2C  80 7F 00 00 */	lwz r3, 0x0(r31)
/* 8005ABB0 00056B30  7C 1F 03 78 */	mr r31, r0
/* 8005ABB4 00056B34  48 00 3A B9 */	bl TRKTargetSetInputPendingPtr
/* 8005ABB8 00056B38  2C 1F 00 00 */	cmpwi r31, 0x0
/* 8005ABBC 00056B3C  41 82 00 08 */	beq .L_8005ABC4
/* 8005ABC0 00056B40  7F FE FB 78 */	mr r30, r31
.L_8005ABC4:
/* 8005ABC4 00056B44  2C 1E 00 00 */	cmpwi r30, 0x0
/* 8005ABC8 00056B48  40 82 00 0C */	bne .L_8005ABD4
/* 8005ABCC 00056B4C  48 00 0B 01 */	bl TRKInitializeSerialHandler
/* 8005ABD0 00056B50  7C 7E 1B 78 */	mr r30, r3
.L_8005ABD4:
/* 8005ABD4 00056B54  2C 1E 00 00 */	cmpwi r30, 0x0
/* 8005ABD8 00056B58  40 82 00 0C */	bne .L_8005ABE4
/* 8005ABDC 00056B5C  48 00 3C 91 */	bl TRKInitializeTarget
/* 8005ABE0 00056B60  7C 7E 1B 78 */	mr r30, r3
.L_8005ABE4:
/* 8005ABE4 00056B64  7F C3 F3 78 */	mr r3, r30
/* 8005ABE8 00056B68  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 8005ABEC 00056B6C  83 C1 00 08 */	lwz r30, 0x8(r1)
/* 8005ABF0 00056B70  38 21 00 10 */	addi r1, r1, 0x10
/* 8005ABF4 00056B74  80 01 00 04 */	lwz r0, 0x4(r1)
/* 8005ABF8 00056B78  7C 08 03 A6 */	mtlr r0
/* 8005ABFC 00056B7C  4E 80 00 20 */	blr
.endfn TRKInitializeNub

.fn TRKTerminateNub, global
/* 8005AC00 00056B80  7C 08 02 A6 */	mflr r0
/* 8005AC04 00056B84  90 01 00 04 */	stw r0, 0x4(r1)
/* 8005AC08 00056B88  94 21 FF F8 */	stwu r1, -0x8(r1)
/* 8005AC0C 00056B8C  48 00 0A E5 */	bl TRKTerminateSerialHandler
/* 8005AC10 00056B90  38 60 00 00 */	li r3, 0x0
/* 8005AC14 00056B94  38 21 00 08 */	addi r1, r1, 0x8
/* 8005AC18 00056B98  80 01 00 04 */	lwz r0, 0x4(r1)
/* 8005AC1C 00056B9C  7C 08 03 A6 */	mtlr r0
/* 8005AC20 00056BA0  4E 80 00 20 */	blr
.endfn TRKTerminateNub

.fn TRKNubWelcome, global
/* 8005AC24 00056BA4  7C 08 02 A6 */	mflr r0
/* 8005AC28 00056BA8  3C 60 80 06 */	lis r3, lbl_80064780@ha
/* 8005AC2C 00056BAC  90 01 00 04 */	stw r0, 0x4(r1)
/* 8005AC30 00056BB0  38 63 47 80 */	addi r3, r3, lbl_80064780@l
/* 8005AC34 00056BB4  94 21 FF F8 */	stwu r1, -0x8(r1)
/* 8005AC38 00056BB8  48 00 43 79 */	bl TRK_board_display
/* 8005AC3C 00056BBC  38 21 00 08 */	addi r1, r1, 0x8
/* 8005AC40 00056BC0  80 01 00 04 */	lwz r0, 0x4(r1)
/* 8005AC44 00056BC4  7C 08 03 A6 */	mtlr r0
/* 8005AC48 00056BC8  4E 80 00 20 */	blr
.endfn TRKNubWelcome

.fn TRKInitializeEndian, global
/* 8005AC4C 00056BCC  3C 60 80 0A */	lis r3, gTRKBigEndian@ha
/* 8005AC50 00056BD0  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8005AC54 00056BD4  38 A3 69 08 */	addi r5, r3, gTRKBigEndian@l
/* 8005AC58 00056BD8  38 C0 00 01 */	li r6, 0x1
/* 8005AC5C 00056BDC  90 C5 00 00 */	stw r6, 0x0(r5)
/* 8005AC60 00056BE0  38 00 00 12 */	li r0, 0x12
/* 8005AC64 00056BE4  38 60 00 34 */	li r3, 0x34
/* 8005AC68 00056BE8  98 01 00 08 */	stb r0, 0x8(r1)
/* 8005AC6C 00056BEC  38 80 00 56 */	li r4, 0x56
/* 8005AC70 00056BF0  38 00 00 78 */	li r0, 0x78
/* 8005AC74 00056BF4  98 61 00 09 */	stb r3, 0x9(r1)
/* 8005AC78 00056BF8  38 60 00 00 */	li r3, 0x0
/* 8005AC7C 00056BFC  98 81 00 0A */	stb r4, 0xa(r1)
/* 8005AC80 00056C00  98 01 00 0B */	stb r0, 0xb(r1)
/* 8005AC84 00056C04  80 81 00 08 */	lwz r4, 0x8(r1)
/* 8005AC88 00056C08  3C 04 ED CC */	addis r0, r4, 0xedcc
/* 8005AC8C 00056C0C  28 00 56 78 */	cmplwi r0, 0x5678
/* 8005AC90 00056C10  40 82 00 0C */	bne .L_8005AC9C
/* 8005AC94 00056C14  90 C5 00 00 */	stw r6, 0x0(r5)
/* 8005AC98 00056C18  48 00 00 20 */	b .L_8005ACB8
.L_8005AC9C:
/* 8005AC9C 00056C1C  3C 04 87 AA */	addis r0, r4, 0x87aa
/* 8005ACA0 00056C20  28 00 34 12 */	cmplwi r0, 0x3412
/* 8005ACA4 00056C24  40 82 00 10 */	bne .L_8005ACB4
/* 8005ACA8 00056C28  38 00 00 00 */	li r0, 0x0
/* 8005ACAC 00056C2C  90 05 00 00 */	stw r0, 0x0(r5)
/* 8005ACB0 00056C30  48 00 00 08 */	b .L_8005ACB8
.L_8005ACB4:
/* 8005ACB4 00056C34  38 60 00 01 */	li r3, 0x1
.L_8005ACB8:
/* 8005ACB8 00056C38  38 21 00 10 */	addi r1, r1, 0x10
/* 8005ACBC 00056C3C  4E 80 00 20 */	blr
.endfn TRKInitializeEndian

.section .rodata, "wa"  # 0x80063D20 - 0x80065000

.balign 8

.obj lbl_80064780, local
	.asciz "MetroTRK for Dolphin v0.8"
	.balign 4
	.4byte 0
.endobj lbl_80064780

.section .bss, "", @nobits  # 0x8006D1C0 - 0x800A8A80

.balign 8

.obj gTRKBigEndian, global
	.skip 0x4
.endobj gTRKBigEndian

.skip 4
